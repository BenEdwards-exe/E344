Version 4
SHEET 1 1652 680
WIRE -416 -352 -432 -352
WIRE -336 -352 -352 -352
WIRE -288 -352 -336 -352
WIRE -272 -352 -288 -352
WIRE -16 -352 -32 -352
WIRE 80 -352 64 -352
WIRE 368 -352 80 -352
WIRE 448 -352 368 -352
WIRE 560 -352 544 -352
WIRE 368 -336 368 -352
WIRE 624 -336 608 -336
WIRE 640 -336 624 -336
WIRE 736 -336 720 -336
WIRE 752 -336 736 -336
WIRE 848 -336 832 -336
WIRE 864 -336 848 -336
WIRE 80 -288 80 -352
WIRE 800 -288 768 -288
WIRE -336 -272 -336 -352
WIRE 736 -272 736 -336
WIRE 768 -272 768 -288
WIRE 560 -256 560 -352
WIRE 368 -240 368 -256
WIRE 464 -240 464 -304
WIRE 464 -240 368 -240
WIRE 624 -240 624 -336
WIRE 720 -240 624 -240
WIRE 848 -240 848 -336
WIRE 848 -240 784 -240
WIRE 368 -224 368 -240
WIRE -336 -176 -336 -208
WIRE -160 -176 -160 -256
WIRE 80 -176 80 -208
WIRE 80 -176 -160 -176
WIRE 752 -176 752 -208
WIRE 800 -176 800 -288
WIRE 800 -176 752 -176
WIRE 832 -176 800 -176
WIRE 272 -144 240 -144
WIRE 320 -144 272 -144
WIRE 560 -144 560 -192
WIRE 608 -144 560 -144
WIRE 560 -128 560 -144
WIRE 80 -112 80 -176
WIRE 272 -112 272 -144
WIRE 608 -80 608 -144
WIRE 656 -80 608 -80
WIRE 560 -32 560 -48
WIRE 656 -32 560 -32
WIRE 272 -16 272 -32
WIRE 368 -16 368 -128
WIRE 368 -16 272 -16
WIRE -320 16 -336 16
WIRE 80 16 80 -32
WIRE 368 16 368 -16
WIRE 560 16 560 -32
WIRE 656 16 560 16
WIRE 896 48 896 0
WIRE -320 64 -320 16
WIRE -320 64 -496 64
WIRE 320 64 -320 64
WIRE 416 64 320 64
WIRE 560 64 560 16
WIRE 560 64 512 64
WIRE 320 96 320 64
WIRE -320 128 -400 128
WIRE -160 128 -320 128
WIRE 64 128 -160 128
WIRE 192 128 64 128
WIRE 800 128 752 128
WIRE 848 128 800 128
WIRE 800 144 800 128
WIRE -160 176 -160 128
WIRE 192 176 192 128
WIRE -496 192 -496 64
WIRE 320 192 320 176
WIRE 432 192 432 112
WIRE 432 192 320 192
WIRE 320 208 320 192
WIRE -240 224 -384 224
WIRE 896 224 896 144
WIRE 896 224 800 224
WIRE -320 256 -320 128
WIRE 64 256 64 128
WIRE 896 256 896 224
WIRE -384 272 -384 224
WIRE -352 272 -384 272
WIRE -160 272 -160 256
WIRE 32 272 -160 272
WIRE -240 288 -240 224
WIRE -240 288 -288 288
WIRE -192 288 -240 288
WIRE -160 288 -160 272
WIRE 192 288 192 256
WIRE 192 288 96 288
WIRE 224 288 192 288
WIRE 272 288 224 288
WIRE -496 304 -496 272
WIRE -352 304 -496 304
WIRE 32 304 0 304
WIRE 224 304 224 288
WIRE -496 320 -496 304
WIRE 544 336 528 336
WIRE 640 336 624 336
WIRE 720 336 640 336
WIRE 64 352 64 320
WIRE 640 368 640 336
WIRE -160 384 -160 368
WIRE 320 384 320 304
WIRE 320 384 224 384
WIRE 320 416 320 384
WIRE -496 432 -496 400
WIRE -320 432 -320 320
WIRE -320 432 -496 432
WIRE -192 448 -192 288
WIRE -112 448 -192 448
WIRE 0 448 0 304
WIRE 0 448 -32 448
WIRE 16 448 0 448
WIRE 192 448 192 288
WIRE 192 448 96 448
WIRE 640 464 640 432
WIRE -496 496 -496 432
FLAG -336 16 BatteryTerminal
IOPIN -336 16 Out
FLAG -400 128 5V
IOPIN -400 128 In
FLAG 320 416 0
FLAG -160 384 0
FLAG 64 352 0
FLAG -496 496 0
FLAG -432 -352 VSupply
IOPIN -432 -352 In
FLAG 240 -144 ChargeOn
IOPIN 240 -144 In
FLAG 368 16 0
FLAG 80 16 0
FLAG -336 -176 0
FLAG 528 336 OUT_TSC213
IOPIN 528 336 Out
FLAG 656 -32 VIN-_TSC213
IOPIN 656 -32 Out
FLAG 656 -80 VIN+_TSC213
IOPIN 656 -80 Out
FLAG 864 -336 5V
IOPIN 864 -336 Out
FLAG 608 -336 0
FLAG 832 -176 REF_TSC213
IOPIN 832 -176 Out
FLAG 640 464 0
FLAG 720 336 FILTER_OUT
IOPIN 720 336 Out
FLAG 896 256 0
FLAG 656 16 LOAD_IN
IOPIN 656 16 Out
FLAG 896 0 LOAD_OUT
IOPIN 896 0 In
FLAG 752 128 LOAD_CONTROL
IOPIN 752 128 In
SYMBOL pmos 512 112 M270
SYMATTR InstName M1
SYMATTR Value irf9z24n
SYMATTR Prefix X
SYMATTR SpiceModel irf9z24n
SYMBOL nmos 272 208 R0
SYMATTR InstName M2
SYMATTR Value 2N7002
SYMBOL OpAmps\\LTC6079 64 288 R0
SYMATTR InstName U1
SYMBOL res 304 80 R0
SYMATTR InstName R_M1
SYMATTR Value 100k
SYMBOL res 208 288 R0
SYMATTR InstName R_M2
SYMATTR Value 100k
SYMBOL res -176 272 R0
SYMATTR InstName R1
SYMATTR Value 34.1k
SYMBOL res -176 160 R0
SYMATTR InstName R2
SYMATTR Value 22k
SYMBOL res -128 464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 0 464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 500k
SYMBOL res 176 160 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -512 304 R0
SYMATTR InstName R6
SYMATTR Value 220k
SYMBOL res -512 176 R0
SYMATTR InstName R7
SYMATTR Value 220k
SYMBOL OpAmps\\LTC6079 -320 288 R0
SYMATTR InstName U2
SYMBOL PowerProducts\\LT317A -160 -352 R0
SYMATTR InstName U3
SYMBOL pmos 544 -304 M270
SYMATTR InstName M3
SYMATTR Value irf9z24n
SYMATTR Prefix X
SYMATTR SpiceModel irf9z24n
SYMBOL nmos 320 -224 R0
SYMATTR InstName M4
SYMATTR Value 2N7002
SYMBOL schottky 544 -256 R0
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -416 -336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 352 -352 R0
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL res 256 -128 R0
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res -32 -336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 0.46
SYMBOL cap -352 -272 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL res 64 -128 R0
SYMATTR InstName R11
SYMATTR Value 1.1k
SYMBOL res 64 -304 R0
SYMATTR InstName R12
SYMATTR Value 220
SYMBOL res 848 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 185k
SYMBOL res 736 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL res 528 352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 15.98k
SYMBOL cap 624 368 R0
SYMATTR InstName C3
SYMATTR Value 4.7µ
SYMBOL res 576 -32 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rsense
SYMATTR Value 100m
SYMBOL OpAmps\\LTC6079 752 -240 R90
SYMATTR InstName U4
SYMBOL nmos 848 48 R0
SYMATTR InstName M5
SYMATTR Value 2N7002
SYMBOL res 784 128 R0
SYMATTR InstName R_M5
SYMATTR Value 100k
